{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport store from './store';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap\";\nimport \"./assets/css/style.css\"; // axios.defaults.withCredentials = true\n\naxios.defaults.baseURL = 'http://localhost:8000/api/auth'; // axios.defaults.headers.post['Accept'] = 'application/json';\n// axios.defaults.headers.post['Content-Type'] = 'application/json';\n\nconst token = localStorage.getItem('token');\n\nif (token) {\n  axios.defaults.headers.common['Authorization'] = token;\n}\n\naxios.interceptors.response.use(undefined, function (error) {\n  if (error) {\n    const originalRequest = error.config;\n\n    if (error.response.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n      store.dispatch('logout');\n      return router.push('/login');\n    } else {\n      store.commit('handle_error', JSON.parse(error.response.data.error));\n    }\n  }\n});\ncreateApp(App).use(router).use.apply(VueAxios, axios).use(store).mount('#app');","map":{"version":3,"sources":["D:/Web/vue/ecommerce_admin_ui/src/main.js"],"names":["createApp","App","router","axios","VueAxios","store","defaults","baseURL","token","localStorage","getItem","headers","common","interceptors","response","use","undefined","error","originalRequest","config","status","_retry","dispatch","push","commit","JSON","parse","data","apply","mount"],"mappings":"AAAA,SAASA,SAAT,QAA0B,KAA1B;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAO,sCAAP;AACA,OAAO,WAAP;AAIA,OAAO,wBAAP,C,CAIA;;AACAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyB,gCAAzB,C,CACA;AACA;;AACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,IAAIF,KAAJ,EAAW;AACPL,EAAAA,KAAK,CAACG,QAAN,CAAeK,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDJ,KAAjD;AACH;;AAEDL,KAAK,CAACU,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgCC,SAAhC,EAA2C,UAAUC,KAAV,EAAiB;AACxD,MAAIA,KAAJ,EAAW;AACP,UAAMC,eAAe,GAAGD,KAAK,CAACE,MAA9B;;AACA,QAAIF,KAAK,CAACH,QAAN,CAAeM,MAAf,KAA0B,GAA1B,IAAiC,CAACF,eAAe,CAACG,MAAtD,EAA8D;AAC1DH,MAAAA,eAAe,CAACG,MAAhB,GAAyB,IAAzB;AACAhB,MAAAA,KAAK,CAACiB,QAAN,CAAe,QAAf;AACA,aAAOpB,MAAM,CAACqB,IAAP,CAAY,QAAZ,CAAP;AACH,KAJD,MAKK;AACDlB,MAAAA,KAAK,CAACmB,MAAN,CAAa,cAAb,EAA6BC,IAAI,CAACC,KAAL,CAAWT,KAAK,CAACH,QAAN,CAAea,IAAf,CAAoBV,KAA/B,CAA7B;AACH;AACJ;AACJ,CAZD;AAeAjB,SAAS,CAACC,GAAD,CAAT,CAAec,GAAf,CAAmBb,MAAnB,EAA2Ba,GAA3B,CAA+Ba,KAA/B,CAAqCxB,QAArC,EAA+CD,KAA/C,EAAsDY,GAAtD,CAA0DV,KAA1D,EAAiEwB,KAAjE,CAAuE,MAAvE","sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\nimport store from './store'\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap\";\r\n\r\n\r\n\r\nimport \"./assets/css/style.css\";\r\n\r\n\r\n\r\n// axios.defaults.withCredentials = true\r\naxios.defaults.baseURL = 'http://localhost:8000/api/auth'\r\n// axios.defaults.headers.post['Accept'] = 'application/json';\r\n// axios.defaults.headers.post['Content-Type'] = 'application/json';\r\nconst token = localStorage.getItem('token')\r\nif (token) {\r\n    axios.defaults.headers.common['Authorization'] = token\r\n}\r\n\r\naxios.interceptors.response.use(undefined, function (error) {\r\n    if (error) {\r\n        const originalRequest = error.config;\r\n        if (error.response.status === 401 && !originalRequest._retry) {\r\n            originalRequest._retry = true;\r\n            store.dispatch('logout')\r\n            return router.push('/login')\r\n        }\r\n        else {\r\n            store.commit('handle_error', JSON.parse(error.response.data.error));\r\n        }\r\n    }\r\n})\r\n\r\n\r\ncreateApp(App).use(router).use.apply(VueAxios, axios).use(store).mount('#app')\r\n"]},"metadata":{},"sourceType":"module"}